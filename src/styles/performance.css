/* Performance optimizations for faster rendering */

/* Use CSS containment to isolate rendering contexts */
.message-entry {
  contain: layout style;
  will-change: auto;
}

.conversation-container {
  contain: layout;
  /* Use transform instead of scroll for better performance */
  will-change: transform;
  /* GPU acceleration for smooth scrolling */
  -webkit-overflow-scrolling: touch;
  scroll-behavior: auto; /* Disable smooth scrolling for performance */
}

/* Optimize animations by using transform and opacity only */
.message {
  contain: layout style;
  /* Remove fadeIn animation for faster rendering */
  animation: none;
  /* Use will-change for elements that will animate */
  will-change: auto;
}

/* Optimize streaming markdown rendering */
.message.ai .message-content {
  /* Enable CSS containment for better performance */
  contain: layout;
}

/* Optimize streaming code blocks for fast rendering */
.message.ai .message-content pre {
  /* Fast rendering for streaming code blocks */
  contain: layout style;
  text-rendering: optimizeSpeed;
  font-kerning: none;
  /* Disable text shaping during streaming for better performance */
  font-variant-ligatures: none;
  /* Use simple overflow instead of complex scrollbars during streaming */
  scrollbar-width: thin;
}

/* Optimize full syntax highlighted code blocks */
.message.ai .message-content div[class*="language-"] {
  /* Use CSS containment for code blocks */
  contain: layout style paint;
  /* Optimize for faster rendering */
  transform: translateZ(0);
}

/* Reduce animation overhead */
.classifying-indicator .dots span {
  /* Simplify blinking animation */
  animation-duration: 1s;
  animation-timing-function: ease-in-out;
}

.loading-dot {
  /* Optimize bounce animation */
  animation-duration: 1s;
  animation-timing-function: ease-in-out;
  /* Use transform3d for hardware acceleration */
  transform: translate3d(0, 0, 0);
}

@keyframes bounce-dot {
  0%, 80%, 100% {
    transform: translate3d(0, 0, 0);
  }
  40% {
    transform: translate3d(0, -5px, 0);
  }
}

/* Optimize search input wrapper animations */
.search-input-wrapper::before,
.search-input-wrapper::after {
  /* Reduce animation complexity */
  animation-duration: 2s;
  will-change: transform, opacity;
}

/* Disable animations on lower-powered devices */
@media (prefers-reduced-motion: reduce) {
  .message,
  .classifying-indicator .dots span,
  .loading-dot,
  .search-input-wrapper::before,
  .search-input-wrapper::after {
    animation: none !important;
    transition: none !important;
  }
  
  .conversation-container {
    will-change: auto;
  }
  
  /* Disable font optimizations for better accessibility */
  .message.ai .message-content pre {
    text-rendering: auto;
    font-kerning: auto;
    font-variant-ligatures: normal;
  }
}

/* GPU acceleration for smooth animations */
.search-input-wrapper,
.search-input-wrapper::after,
.send-button,
.model-dropdown {
  will-change: transform, opacity;
  transform: translateZ(0);
}

/* Optimize text rendering */
.message-content {
  text-rendering: optimizeSpeed;
  font-display: swap;
}

/* During streaming, use faster text rendering */
.message-content:has(.loading-dots-container) {
  text-rendering: optimizeSpeed;
}

/* Prevent layout thrashing during typing */
.search-input {
  contain: layout;
}

/* Optimize dropdown rendering */
.model-options-list {
  contain: layout;
}

/* Reduce paint on hover states during streaming */
.message-entry.ai:has(.loading-dots-container) .message {
  pointer-events: none;
}

/* Optimize timestamp rendering */
.message-timestamp {
  contain: layout style;
  font-variant-numeric: tabular-nums;
}

/* Fast initial render for streaming messages */
.message.ai .message-content > div[style*="whiteSpace: pre-wrap"] {
  font-kerning: none;
  text-rendering: optimizeSpeed;
}

/* Border pulse keyframes */
@keyframes border-pulse {
  0% {
    opacity: 0;
  }
  10% {
    opacity: 0.4;
  }
  50% {
    opacity: 0.6;
  }
  90% {
    opacity: 0.2;
  }
  100% {
    opacity: 0;
  }
} 